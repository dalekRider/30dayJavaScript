<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="assets/css/twist.css">
  <link href="https://fonts.googleapis.com/css?family=Orbitron|Raleway" rel="stylesheet">
  <title>JS Sound Board</title>
</head>
<body>
  <header>
    <h1>Doctor Who Sound Board</h1>
    <p>Press a number to play a transdimensional sound byte!</p>
    <p class="browser-message">The site is optimized using grid layout. Your current browser does not seem to support it. The site will work, but you should update your browser as many site will start using grid</p>
  </header>

  <main>
    <!-- Soundboard Grid -->
    <div class="grid">
      <!-- Sound tile -->
      <div data-key="49" class="clip">
        <kbd>1</kbd>
        <span class="sound">Theme Song</span>
      </div>
      <!-- End Sound Tile -->

      <div data-key="50" class="clip">
        <kbd>2</kbd>
        <span class="sound">Climax Song</span>
      </div>

      <div data-key="51" class="clip">
        <kbd>3</kbd>
        <span class="sound">Dont Blink!</span>
      </div>

      <div data-key="52" class="clip">
        <kbd>4</kbd>
        <span class="sound">Rose "Trouble"</span>
      </div>

      <div data-key="53" class="clip">
        <kbd>5</kbd>
        <span class="sound">Missy "Goot"</span>
      </div>

      <div data-key="54" class="clip">
        <kbd>6</kbd>
        <span class="sound">Tardis</span>
      </div>

      <div data-key="55" class="clip">
        <kbd>7</kbd>
        <span class="sound">Martha Jones</span>
      </div>

      <div data-key="56" class="clip">
        <kbd>8</kbd>
        <span class="sound">Exterminate!</span>
      </div>

    </div>

    <audio data-key="49" src="assets/sounds/dr_who_theme.mp3"></audio>
    <audio data-key="50" src="assets/sounds/onwards_climax.mp3"></audio>
    <audio data-key="51" src="assets/sounds/dr_who___dont_blink.mp3"></audio>
    <audio data-key="52" src="assets/sounds/dr_rose_trouble.mp3"></audio>
    <audio data-key="53" src="assets/sounds/dr_who___missy_good.mp3"></audio>
    <audio data-key="54" src="assets/sounds/tardis_take_off.mp3"></audio>
    <audio data-key="55" src="assets/sounds/dr_martha_jones.mp3"></audio>
    <audio data-key="56" src="assets/sounds/dr_who_exterminate.mp3"></audio>

  </main>

  <script>

    function playSound(e) {
      const audio = document.querySelector(`audio[data-key="${e.keyCode}"]`);
      const key = document.querySelector(`.clip[data-key="${e.keyCode}"]`);
      if (!audio) return; //if wrong key code will end here
      audio.currentTime = 0; //restart from beginning if already playing
      audio.play();
      key.classList.add('playing');
    }

    function removeTransition(e) {
      if (e.propertyName !== 'transform') return;
      this.classList.remove('playing');
    }

    const keys = document.querySelectorAll('.clip');
    keys.forEach(key => key.addEventListener('transitionend', removeTransition));
    window.addEventListener('keydown', playSound);

  </script>

</body>
</html>
